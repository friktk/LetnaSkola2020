<!doctype html><html lang=sk class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Výučbový systém BT-car3"><link href=https://hudikm.github.io/TrafficCounterDemo/pr4/ rel=canonical><meta name=author content="Martin Húdik"><link rel="shortcut icon" href=../assets/favicon.png><meta name=generator content="mkdocs-1.1, mkdocs-material-5.1.5"><title>Príklad 4 „UART“ - BT-car3</title><link rel=stylesheet href=../assets/stylesheets/main.df84b5fe.min.css><link rel=stylesheet href=../assets/stylesheets/palette.8435c73a.min.css><meta name=theme-color content=#3f51b5><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../stylesheets/extra.css><link rel=stylesheet href=../stylesheets/w3.css></head> <body dir data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#registre-prenosovej-rychlosti-ubrr0l-a-ubrr0h-usart-baud-rate-registers class=md-skip> Preskočiť na obsah </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label> <a href=https://hudikm.github.io/TrafficCounterDemo/ title=BT-car3 class="md-header-nav__button md-logo" aria-label=BT-car3> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"><path d="M3.136 17.387v42.932l42.932 21.467L3.136 17.387z"/><path fill-opacity=.5 d="M21.91 8l42.933 64.398-18.775 9.388L3.136 17.387 21.91 8z"/><path d="M67.535 17.387L40.273 35.543l21.878 32.818 5.384 2.691V17.387z"/><path fill-opacity=.25 d="M67.535 17.387v53.666l18.774-9.388V8l-18.774 9.387z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> BT-car3 </span> <span class="md-header-nav__topic md-ellipsis"> Príklad 4 „UART“ </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Hľadať placeholder=Hľadať autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/hudikm/TrafficCounterDemo.git title="Zobraziť repozitár" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> TrafficCounterDemo </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class="md-tabs__link md-tabs__link--active"> BT-car3 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://hudikm.github.io/TrafficCounterDemo/ title=BT-car3 class="md-nav__button md-logo" aria-label=BT-car3> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"><path d="M3.136 17.387v42.932l42.932 21.467L3.136 17.387z"/><path fill-opacity=.5 d="M21.91 8l42.933 64.398-18.775 9.388L3.136 17.387 21.91 8z"/><path d="M67.535 17.387L40.273 35.543l21.878 32.818 5.384 2.691V17.387z"/><path fill-opacity=.25 d="M67.535 17.387v53.666l18.774-9.388V8l-18.774 9.387z"/></svg> </a> BT-car3 </label> <div class=md-nav__source> <a href=https://github.com/hudikm/TrafficCounterDemo.git title="Zobraziť repozitár" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> TrafficCounterDemo </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 type=checkbox id=nav-1 checked> <label class=md-nav__link for=nav-1> BT-car3 <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=BT-car3 data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> BT-car3 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. title=Úvod class=md-nav__link> Úvod </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1-2 type=checkbox id=nav-1-2 checked> <label class=md-nav__link for=nav-1-2> Príklady <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Príklady data-md-level=2> <label class=md-nav__title for=nav-1-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Príklady </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../pr1/ title="Príklad 1 „RGB_LED“" class=md-nav__link> Príklad 1 „RGB_LED“ </a> </li> <li class=md-nav__item> <a href=../pr2/ title="Príklad 2 „RGB_AKU“" class=md-nav__link> Príklad 2 „RGB_AKU“ </a> </li> <li class=md-nav__item> <a href=../pr3/ title="Príklad 3 „TLAČIDLO“" class=md-nav__link> Príklad 3 „TLAČIDLO“ </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Príklad 4 „UART“ <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="Príklad 4 „UART“" class="md-nav__link md-nav__link--active"> Príklad 4 „UART“ </a> <nav class="md-nav md-nav--secondary" aria-label=Obsah> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Obsah </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#registre-prenosovej-rychlosti-ubrr0l-a-ubrr0h-usart-baud-rate-registers class=md-nav__link> Registre prenosovej rýchlosti, UBRR0L a UBRR0H - USART Baud Rate Registers </a> </li> <li class=md-nav__item> <a href=#vv-udajovy-register-udr0-usart-io-data-register class=md-nav__link> V/V údajový register, UDR0 – USART I/O Data Register </a> </li> <li class=md-nav__item> <a href=#riadiaci-a-stavovy-register-a-ucsr0a-usart-control-and-status-register-a class=md-nav__link> Riadiaci a stavový register A, UCSR0A - USART Control and Status Register A </a> </li> <li class=md-nav__item> <a href=#riadiaci-a-stavovy-register-b-ucsr0b-usart-control-and-status-register-b class=md-nav__link> Riadiaci a stavový register B, UCSR0B- USART Control and Status Register B </a> </li> <li class=md-nav__item> <a href=#riadiaci-a-stavovy-register-c-ucsr0c-usart-control-and-status-register-c class=md-nav__link> Riadiaci a stavový register C, UCSR0C - USART Control and Status Register C </a> </li> <li class=md-nav__item> <a href=#uloha class=md-nav__link> Úloha </a> </li> <li class=md-nav__item> <a href=#rozsirenie-triedy-uart class=md-nav__link> Rozšírenie triedy UART </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../pr5.md title="Príklad 5 „Fotoodpor“" class=md-nav__link> Príklad 5 „Fotoodpor“ </a> </li> <li class=md-nav__item> <a href=../pr6.md title="Prerušovací podsystém" class=md-nav__link> Prerušovací podsystém </a> </li> <li class=md-nav__item> <a href=../pr6.md title=PWM class=md-nav__link> PWM </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=Obsah> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Obsah </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#registre-prenosovej-rychlosti-ubrr0l-a-ubrr0h-usart-baud-rate-registers class=md-nav__link> Registre prenosovej rýchlosti, UBRR0L a UBRR0H - USART Baud Rate Registers </a> </li> <li class=md-nav__item> <a href=#vv-udajovy-register-udr0-usart-io-data-register class=md-nav__link> V/V údajový register, UDR0 – USART I/O Data Register </a> </li> <li class=md-nav__item> <a href=#riadiaci-a-stavovy-register-a-ucsr0a-usart-control-and-status-register-a class=md-nav__link> Riadiaci a stavový register A, UCSR0A - USART Control and Status Register A </a> </li> <li class=md-nav__item> <a href=#riadiaci-a-stavovy-register-b-ucsr0b-usart-control-and-status-register-b class=md-nav__link> Riadiaci a stavový register B, UCSR0B- USART Control and Status Register B </a> </li> <li class=md-nav__item> <a href=#riadiaci-a-stavovy-register-c-ucsr0c-usart-control-and-status-register-c class=md-nav__link> Riadiaci a stavový register C, UCSR0C - USART Control and Status Register C </a> </li> <li class=md-nav__item> <a href=#uloha class=md-nav__link> Úloha </a> </li> <li class=md-nav__item> <a href=#rozsirenie-triedy-uart class=md-nav__link> Rozšírenie triedy UART </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1>Príklad 4 „UART“</h1> <p><strong>Projekt AVR1</strong></p> <p>Skratka „UART“ je odvodená od počiatočných písmen názvu sériového komunikačného rozhrania „Universal asynchronous receiver-transmitter“. Používa sa na sériový prenos informácií. Prívlastok asynchrónny súvisí so skutočnosťou, že pri prenose informácií nie je potrebné prenášať hodinový/synchronizačný signál. (Či už zakódovaný do dát, alebo po špeciálnom vodiči.) </p> <p>Pomocou modulu UART je možné informáciu vysielať a prijímať. Pôvodne bol vyvinutý na prenos informácií medzi dvoma zariadeniami, bod-bod. Dnes sa stretneme aj s rozšírením prenosového systému, ktorý umožňuje aj zbernicové usporiadanie komunikujúcich prvkov. Na obrázku je uvedený typický priebeh signálu pri asynchrónnej komunikácii.</p> <p><img alt=USART3 src=../images/uart_prebieh.jpg></p> <p>Štart bitom (St) vysielač oznamuje, že ide vyslať rámec s definovaným počtom bitov. Potom nasledujú informačné bity, na obrázku 0 až 8. Za nimi sa vysiela paritný bit (P), za ktorým nasleduje stop bit (Sp1, prípadne Sp2, podľa zvolenej dĺžky). Prijímač potom čaká na nasledujúci štart bit označujúci ďalší rámec. Aby prenos bol úspešný je potrebné aby vysielač a prijímač mali nastavené zhodné parametre prenosu. Medzi tieto parametre patria:</p> <ul> <li>komunikačná rýchlosť - až do 1 Mb/s (podľa CLKmain)</li> <li>počet informačných bitov - 5, 6, 7, 8 alebo 9 bitov,</li> <li>parita - párna, nepárna, bez parity</li> <li>dĺžka stop bitu - 1 alebo 2 stop bity</li> <li>riadenie toku - s riadením, bez riadenia toku</li> </ul> <blockquote> <p>Nastavenie prenosových parametrov v programe Tera Term <img alt=img src=../images/uart_parametre.jpg#center></p> </blockquote> <p>Ak chceme komunikovať medzi týmto terminálom a modulom AVR-board je potrebné aby rovnaké parametre boli použité aj v komunikačnom podsystéme USART v obvode ATmega328P. Pripomeňme, že na PC nemáme vyvedenú sériovú linku UART, preto je pri komunikácii potrebný prevodník, ktorý zabezpečí transformáciu linky UART na USB. V počítači sa opätovne programovými prostriedkami príslušného ovládača rozhranie USB transformuje na UART. Vytvorí sa virtuálny COMPORT, na ktorý sa užívateľská aplikácia obracia ako na UART.</p> <p><img alt=img src=../images/uart_prevodnik.jpg></p> <p>Venujme sa však strane mikrontroléra. Ten má vo svojej štruktúre integrovaný komunikačný modul USART, ktorý umožňuje sériovú komunikáciu. </p> <p><img alt=USART src=../images/uart_blokovaSch.jpg></p> <p>Synchrónnu (preto je tam to S), ako aj asynchrónnu. Na obrázku je znázornená bloková štruktúra modulu USART. Je pomerne zložitá, preto sa obmedzíme len na popis registrov, do ktorých má prístup užívateľ z programu. Prvý je register UBRR0. Obsah tohto registra definuje prenosovú rýchlosť. Ďalším registrom je register UDR0. Je to register, z ktorého je možné čítať prijatý znak, alebo zapisovať znak, ktorý chcete vyslať. Fyzicky sú to vlastne dva registre s rovnakou adresou. Nakoniec komunikačný modul USART obsahuje tri riadiace registre UCSRA0, UCSRB0 a UCSRC0 pomocou ktorých nastavuje komunikačné parametre a zisťujeme stav komunikačného modulu. Sú to tzv. stavové a riadiace registre.</p> <p>Kvôli jednoduchosti sa budeme venovať len asynchrónnej komunikácii. Voľba asynchrónneho režimu sa realizuje zápisom log.0 do bitov UMSEL00 a UMSEL01 v registri UCSR0C. Poznamenajme, že počiatočné nastavenie týchto bitov je 00, preto pokiaľ ich nenastavíme ináč bude modul po zapnutí v režime asynchrónnej komunikácie. Popíšme bližšie význam jednotlivých bitov v dátových, riadiacich a stavových registroch.</p> <h3 id=registre-prenosovej-rychlosti-ubrr0l-a-ubrr0h-usart-baud-rate-registers>Registre prenosovej rýchlosti, UBRR0L a UBRR0H - USART Baud Rate Registers<a class=headerlink href=#registre-prenosovej-rychlosti-ubrr0l-a-ubrr0h-usart-baud-rate-registers title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Bit</th> <th>15</th> <th>14</th> <th>13</th> <th>12</th> <th>11</th> <th>10</th> <th>9</th> <th>8</th> </tr> </thead> <tbody> <tr> <td>Symbol</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>UBRR011</td> <td>UBRR010</td> <td>UBRR09</td> <td>UBRR08</td> </tr> <tr> <td>Prístup</td> <td>R/W</td> <td>R</td> <td>R</td> <td>R</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> </tr> <tr> <td>P.hod.</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> </tr> </tbody> </table> <p><strong>UBRR</strong></p> <p><strong>Bity 15:12 – nevyužité (rezervované) bity</strong></p> <ul> <li>Pri zápise do UBRR0H musia byť tieto bity rovné nule.</li> </ul> <p><strong>Bity 11:0 – UBRR011:0: USART Baud Rate Register, register prenosovej rýchlosti</strong></p> <ul> <li>12-bitový register UBRR0 obsahuje údaj o prenosovej rýchlosti jednotky USART. V registri UBRRH sú obsiahnuté štyri najvýznamnejšie bity a register UBRR0L obsahuje osem menej významných bitov. Zmena obsahu registra UBRR0 v priebehu prenosu spôsobí stratu prijímaných a vysielaných dát. Zápisom do registra UBRR0L sa totiž okamžite zmení prenosová rýchlosť.</li> </ul> <blockquote> <p>Nastavenie prenosovej rýchlosti modulu USART (U2X=0)</p> <table> <thead> <tr> <th>Pren. rýchlosť [bps]</th> <th>UBRR0 pri fosc 4 MHz</th> <th>UBRR0 pri fosc 8 MHz</th> <th>UBRR0 Pri fosc 12 MHz</th> <th>UBRR0 pri fosc 16 MHz</th> </tr> </thead> <tbody> <tr> <td>2400</td> <td>103</td> <td>207</td> <td>312</td> <td>416</td> </tr> <tr> <td>4800</td> <td>51</td> <td>103</td> <td>155</td> <td>207</td> </tr> <tr> <td>9600</td> <td>25</td> <td>51</td> <td>77</td> <td>103</td> </tr> <tr> <td>14.4k</td> <td>16</td> <td>34</td> <td>51</td> <td>68</td> </tr> <tr> <td>19.2k</td> <td>12</td> <td>25</td> <td>38</td> <td>51</td> </tr> <tr> <td>28.8k</td> <td>8</td> <td>16</td> <td>25</td> <td>34</td> </tr> <tr> <td>38.4k</td> <td>6</td> <td>12</td> <td>18</td> <td>25</td> </tr> <tr> <td>57.6k</td> <td>3</td> <td>8</td> <td>12</td> <td>16</td> </tr> <tr> <td>76.8k</td> <td>2</td> <td>6</td> <td>9</td> <td>12</td> </tr> <tr> <td>115.2k</td> <td>1</td> <td>3</td> <td>5</td> <td>8</td> </tr> <tr> <td>230.4k</td> <td>0</td> <td>1</td> <td>2</td> <td>3</td> </tr> </tbody> </table> </blockquote> <hr> <blockquote> <p><strong>Normálny asynchrónny režim, U2X0=0</strong> $$ UBRR=\frac{f_{osc}}{16 BAUD}-1 $$</p> </blockquote> <hr> <blockquote> <p><strong>Asynchrónny režim s dvojnásobnou rýchlosťou, U2X0=1</strong> $$ UBRR=\frac{f_{osc}}{8 BAUD}-1 $$</p> </blockquote> <h3 id=vv-udajovy-register-udr0-usart-io-data-register>V/V údajový register, UDR0 – USART I/O Data Register<a class=headerlink href=#vv-udajovy-register-udr0-usart-io-data-register title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Bit</th> <th>7</th> <th>6</th> <th>5</th> <th>4</th> <th>3</th> <th>2</th> <th>1</th> <th>0</th> </tr> </thead> <tbody> <tr> <td>Symbol</td> <td>RXB7</td> <td>RXB6</td> <td>RXB5</td> <td>RXB4</td> <td>RXB3</td> <td>RXB2</td> <td>RXB1</td> <td>RXB0</td> </tr> <tr> <td>Symbol</td> <td>TXB7</td> <td>TXB6</td> <td>TXB5</td> <td>TXB4</td> <td>TXB3</td> <td>TXB2</td> <td>TXB1</td> <td>TXB0</td> </tr> <tr> <td>Prístup</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> </tr> <tr> <td>p. hod.</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> </tr> </tbody> </table> <p><strong>UDR</strong></p> <h3 id=riadiaci-a-stavovy-register-a-ucsr0a-usart-control-and-status-register-a>Riadiaci a stavový register A, UCSR0A - USART Control and Status Register A<a class=headerlink href=#riadiaci-a-stavovy-register-a-ucsr0a-usart-control-and-status-register-a title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Bit</th> <th>7</th> <th>6</th> <th>5</th> <th>4</th> <th>3</th> <th>2</th> <th>1</th> <th>0</th> </tr> </thead> <tbody> <tr> <td>Symbol</td> <td>RXC0</td> <td>TXC0</td> <td>UDRE0</td> <td>FE0</td> <td>DOR0</td> <td>UPE0</td> <td>U2X0</td> <td>MPCM0</td> </tr> <tr> <td>Prístup</td> <td>R</td> <td>R/W</td> <td>R</td> <td>R</td> <td>R</td> <td>R</td> <td>R/W</td> <td>R/W</td> </tr> <tr> <td>P.hod.</td> <td>0</td> <td>0</td> <td>1</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> </tr> </tbody> </table> <p><strong>UCSRA</strong></p> <p><strong>Bit 7 – RXC0: USART Recieve Complete, príjem znaku ukončený</strong></p> <ul> <li>Tento príznakový bit je nastavený na hodnotu 1, ak v prijímací zásobník obsahuje neprečítané dáta. Bit RXC0 je vynulovaný, ak prijímací zásobník je prázdny. Ak sa zakáže činnosť prijímača, potom sa vynuluje zásobník a bit RXC0 bude obsahovať hodnotu 0. Príznakový bit RXC môže byť využitý na generovanie prerušenia.</li> </ul> <p><strong>Bit 6 – TXC0: USART Transmit Complete, ukončené vysielanie znaku</strong></p> <ul> <li>Tento príznakový bit sa nastaví na hodnotu 1 vtedy, keď rámec vložený do vysielacieho posuvného registra je kompletne vyslaný a nové údaje nie sú zapísané do vysielacieho vyrovnávacieho registra (UDR0). TXC0 príznak sa automaticky vynuluje, keď sa vykoná príslušná obsluha prerušenia, alebo zápisom 1 do tejto V/V lokácie. Príznak TXC0 môže byť využitý na generovanie žiadosti o prerušenie.</li> </ul> <p><strong>Bit 5 – UDRE0: USART Data Register Empty, údajový register prázdny</strong></p> <ul> <li>Príznakový bit UDRE0 indikuje, že vysielací vyrovnávací register je pripravený prijať nové dáta. Ak bit UDRE0 má hodnotu 1, potom vyrovnávací register je prázdny a pripravený na zápis nového znaku. Príznak UDRE0 môže byť využitý na generovanie žiadosti o prerušenie.</li> </ul> <p><strong>Bit 4 – FE0: Frame Error, chyba rámca</strong></p> <ul> <li>Tento bit sa nastaví na hodnotu 1, ak znak v prijímacom vyrovnávacom registri obsahoval chybu rámca (prvý stop bit prijatého znaku bol rovný log.0). Hodnota bitu FE0 je platná pokiaľ sa neprečíta obsah prijímacieho vyrovnávacieho registra UDR0. Bit FE0 je rovný nule, ak stop bit prijatého rámca má hodnotu jedna. Zápisom do registra UCSR0A sa uvedený bit vynuluje.</li> </ul> <p><strong>Bit 3 – DOR0: Data OverRun, pretečenie dát</strong></p> <ul> <li>Tento bit sa nastaví na hodnotu 1, ak dôjde k pretečeniu pri príjme dát. Pretečenie vynikne vtedy, ak prijímací zásobník je plný-(dva znaky), nový znak je v prijímacom posuvnom registri a prijatý je ďalší štart bit. Hodnota bitu DOR0 je platná pokiaľ sa neprečíta obsah prijímacieho vyrovnávacieho registra UDR0. Zápisom do registra UCSR0A sa uvedený bit vynuluje.</li> </ul> <p><strong>Bit 2 – UPE0: Parity Error, chyba parity</strong></p> <ul> <li>Bit UPE0 sa nastaví na hodnotu 1, ak znak v prijímacom vyrovnávacom registri obsahoval chybu parity, pričom kontrola parity bola povolená (UPM01=1). Hodnota bitu UPE0 je platná, pokiaľ sa neprečíta obsah prijímacieho vyrovnávacieho registra UDR0. Zápisom do registra UCSR0A sa uvedený bit vynuluje.</li> </ul> <p><strong>Bit 1 – U2X0: Double the USART Transmission Speed, dvojnásobná prenosová rýchlosť</strong></p> <ul> <li>Bit U2X0 má význam len pri asynchrónnom prenose. Ak je zvolený synchrónny prenos, do bitu U2X0 sa zapíše hodnota 0. Pri asynchrónnej komunikácii sa zápisom jednotky do bitu U2X0 prenosová rýchlosť zdvojnásobí.</li> </ul> <p><strong>Bit 0 – MPCM0: Multi-processor Communication Mode</strong></p> <ul> <li>Pomocou bitu MPCM0 sa povoľuje režim multiprocesorovej komunikácie. Keď bit MPCM0 obsahuje1, potom všetky prijímané rámce, ktoré neobsahujú informáciu o adrese sa prijímačom USART ignorujú. Poznamenajme, že hodnota bitu MPCM nemá vplyv na činnosť vysielača modulu USART.</li> </ul> <h3 id=riadiaci-a-stavovy-register-b-ucsr0b-usart-control-and-status-register-b>Riadiaci a stavový register B, UCSR0B- USART Control and Status Register B<a class=headerlink href=#riadiaci-a-stavovy-register-b-ucsr0b-usart-control-and-status-register-b title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Bit</th> <th>7</th> <th>6</th> <th>5</th> <th>4</th> <th>3</th> <th>2</th> <th>1</th> <th>0</th> </tr> </thead> <tbody> <tr> <td>Symbol</td> <td>RXCIE0</td> <td>TXCIE0</td> <td>UDREI0</td> <td>RXEN0</td> <td>TXEN0</td> <td>UCSZ02</td> <td>RXB80</td> <td>TXB80</td> </tr> <tr> <td>Prístup</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R</td> <td>R/W</td> </tr> <tr> <td>Poč. hodnota</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> </tr> </tbody> </table> <p><strong>UCSRB</strong></p> <p><strong>Bit 7– RXCIE0: RX Complete Interrupt Enable, povolenie prerušenia od RXC</strong></p> <ul> <li>Zápisom 1 do bitu RXCIE0 sa povoľuje prerušenie od príznaku RXC. Prerušenie RXC bude generované vtedy, keď bit RXCIE0 obsahuje hodnotu log.1, je globálne povolená obsluha prerušení (bit I v SREG má hodnotu log.1) a súčasne sa bit RXC0 v registri UCSR0A nastaví na hodnotu 1.</li> </ul> <p><strong>Bit 6 – TXCIE0: TX Complete Interrupt Enable, povolenie prerušenia od TXC</strong></p> <ul> <li>Zápisom 1 do bitu TXCIE0 sa povoľuje prerušenie od príznaku TXC0. Prerušenie TXC0 bude generované vtedy, keď bit TXCIE0 obsahuje hodnotu log.1, je globálne povolená obsluha prerušení (bit I v SREG má hodnotu log.1) a súčasne sa bit TXC0 v registri UCSR0A nastaví na hodnotu 1.</li> </ul> <p><strong>Bit 5 – UDRIE0: USART Data Register Empty Interrupt Enable, povolenie prerušenia od UDRE0</strong></p> <ul> <li>Zápisom 1 do bitu UDRIE0 sa povolí prerušenie od príznaku UDRE0. Prerušenie UDRE0 bude generované, ak bit UDRIE0 obsahuje hodnotu 1, je globálne povolená obsluha prerušení (bit I v SREG má hodnotu log.1) a súčasne sa bit UDRE0 v registri UCSR0A nastaví na hodnotu 1.</li> </ul> <p><strong>Bit 4 – RXEN0: Receiver Enable, povolenie činnosti prijímača</strong></p> <ul> <li>Zápisom 1 do bitu RXEN0 sa povolí činnosť prijímača jednotky USART. Režim V/V vývodu RxD sa nastaví na vstup do prijímača USART. Ak sa zakáže činnosť prijímača (RXEN0 = 0 ), potom sa zničí obsah prijímacieho zásobníka a príznakov FE0, DOR0 a PE0.</li> </ul> <p><strong>Bit 3 – TXEN0: Transmitter Enable, povolenie činnosti vysielača</strong></p> <ul> <li>Zápisom do bitu TXEN0 sa povoľuje činnosť vysielača jednotky USART. Aktuálny režim V/V vývodu TxD sa nastaví na výstup z vysielača USART. Ak sa zakáže činnosť prijímača (TXEN0 = 0 ), potom sa vyšlú všetky údaje z posuvného vysielacieho registra a z vyrovnávacieho registra, zakáže sa činnosť vysielača a vývod TxD sa vráti do pôvodného režimu.</li> </ul> <p><strong>Bit 2 – UCSZ02: Character Size, dĺžka znaku</strong></p> <ul> <li>Bit UCSZ02 spolu s bitmi UCSZ01:0 v registri UCSR0C určuje počet údajových bitov prenášaného znaku.</li> </ul> <p><strong>Bit 1 – RXB80: Receive Data Bit 8, prijatý údajový bit 8</strong></p> <ul> <li>Ak je nastavená dĺžka prenášaných znakov na deväť bitov, potom v bite RXB80 je uchovaná hodnota prijatého deviateho údajového bitu RXB80. Jeho hodnota musí byť prečítaná pred čítaním obsahu registra UDR0.</li> </ul> <p><strong>Bit 0 – TXB80: Transmit Data Bit 8, vysielaný údajový bit 8</strong></p> <ul> <li>Ak je nastavená dĺžka prenášaných znakov na deväť bitov, potom TXB80 reprezentuje deviaty vysielaný údajový bit. Deviaty údajový bit musí byť zapísaný pred zápisom spodných ôsmych bitov do registra UDR0.</li> </ul> <h3 id=riadiaci-a-stavovy-register-c-ucsr0c-usart-control-and-status-register-c>Riadiaci a stavový register C, UCSR0C - USART Control and Status Register C<a class=headerlink href=#riadiaci-a-stavovy-register-c-ucsr0c-usart-control-and-status-register-c title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Bit</th> <th>7</th> <th>6</th> <th>5</th> <th>4</th> <th>3</th> <th>2</th> <th>1</th> <th>0</th> </tr> </thead> <tbody> <tr> <td>Symbol</td> <td>UMSEL01</td> <td>UMSEL00</td> <td>UPM01</td> <td>UPM00</td> <td>USBS0</td> <td>UCSZ01</td> <td>UCSZ00</td> <td>UCPOL0</td> </tr> <tr> <td>Prístup</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> <td>R/W</td> </tr> <tr> <td>P.hod.</td> <td>1</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>1</td> <td>1</td> <td>0</td> </tr> </tbody> </table> <p><strong>UCSR0C</strong></p> <p><strong>Bit 7 – URSEL00,1: Register Select, volba rezimu USART, SPI</strong></p> <ul> <li>Na základe hodnoty bitov URSEL je možné voliť režim činnosti USART. (Asynchrónny USART, synchrónny USART, SPI)</li> </ul> <p><strong>Bit 6 – UMSEL0: USART Mode Select, výber režimu USART</strong></p> <ul> <li>Pomocou bitu UMSEL0 sa volí režim činnosti jednotky USART. Ak bit UMSEL0 má hodnotu nula, potom USART pracuje v asynchrónnom prenosovom režime. Ak bit UMSEL0 má hodnotu jedna, potom USART pracuje v synchrónnom prenosovom režime.</li> </ul> <p><strong>Bit 5:4 – UPM01:0: Parity Mode, režim parity</strong></p> <ul> <li>Tieto bity povoľujú a nastavujú typ generovania a kontroly parity. Ak je generovanie a kontrola parity povolená, potom vysielač bude v každom rámci generovať a vysielať paritný bit. Prijímač bude na základe prichádzajúcich dát generovať hodnotu paritného bitu a porovnávať ho s prichádzajúcim paritným bitom v súlade s nastavením bitu UPM00. Pri chybe parity sa nastaví príznak PE0 v registri UCSR0A.</li> </ul> <blockquote> <p><em>Nastavenie režimu generovania a kontroly parity</em> </p> <table> <thead> <tr> <th>UPM01</th> <th>UPM00</th> <th>Režim parity</th> </tr> </thead> <tbody> <tr> <td>0</td> <td>0</td> <td>Zakázaná</td> </tr> <tr> <td>0</td> <td>1</td> <td>Nevyužité</td> </tr> <tr> <td>1</td> <td>0</td> <td>Povolená, párna parita</td> </tr> <tr> <td>1</td> <td>1</td> <td>Povolená, nepárna parita</td> </tr> </tbody> </table> </blockquote> <p><strong>Bit 3 – USBS0: Stop Bit Select, výber stop bitu</strong></p> <ul> <li>Pomocou bitu USBS0 sa volí počet stop bitov, ktoré sú vložené do vysielaného rámca. Ak bit USBS0 má hodnotu nula, potom vysielaný rámec obsahuje jeden stop bit. Ak bit USBS0 má hodnotu jedna, potom vysielaný rámec bude obsahovať dva stop bity. Prijímač modulu USART ignoruje nastavenie bitu USBS0.</li> </ul> <p><strong>Bit 2:1 – UCSZ01:0: Character Size, dĺžka znaku</strong></p> <ul> <li>Pomocou bitov UCSZ01:0 a bitu UCSZ02 v registri UCSR0B je možné nastaviť počet dátových bitov (dĺžku znaku) vo vysielanom a prijímanom rámci.</li> </ul> <blockquote> <p><em>Nastavenie dĺžky vysielaného znaku</em></p> <table> <thead> <tr> <th>UCSZ02</th> <th>UCSZ01</th> <th>UCSZ00</th> <th>Dĺžka znaku</th> </tr> </thead> <tbody> <tr> <td>0</td> <td>0</td> <td>0</td> <td>5 bitov</td> </tr> <tr> <td>0</td> <td>0</td> <td>1</td> <td>6 bitov</td> </tr> <tr> <td>0</td> <td>1</td> <td>0</td> <td>7 bitov</td> </tr> <tr> <td>0</td> <td>1</td> <td>1</td> <td>8 bitov</td> </tr> <tr> <td>1</td> <td>0</td> <td>0</td> <td>Nevyužité</td> </tr> <tr> <td>1</td> <td>0</td> <td>1</td> <td>Nevyužité</td> </tr> <tr> <td>1</td> <td>1</td> <td>0</td> <td>Nevyužité</td> </tr> <tr> <td>1</td> <td>1</td> <td>1</td> <td>9 bitov</td> </tr> </tbody> </table> </blockquote> <p><strong>Bit 0 – UCPOL0: Clock Polarity, polarita hodinových impulzov</strong></p> <ul> <li>Bit UCPOL0 je využitý len v prípade synchrónneho prenosového režimu. Ak je používaný asynchrónny režim do bitu UCPOL zapisujeme nulu. Pomocou bitu UCPOL0 definujeme vzťah medzi hodinovým signálom a vzorkovaním vstupného signálu, respektíve okamžikom zmeny výstupného signálu podľa tabuľky. </li> </ul> <blockquote> <p><em>Nastavenie bitu UCPOL</em></p> <table> <thead> <tr> <th>UCPOL0</th> <th>Zmena vysielaných dát,(TxD vývod)</th> <th>Vzorkovanie prijímaných dát, (RxD vývod)</th> </tr> </thead> <tbody> <tr> <td>0</td> <td>Vzostupná XCK hrana</td> <td>Zostupná XCK hrana</td> </tr> <tr> <td>1</td> <td>Zostupná XCK hrana</td> <td>Vzostupná XCK hrana</td> </tr> </tbody> </table> </blockquote> <p>Je samozrejme možné programovať aj bez týchto detailných znalostí obvodu USART. Ak využijete knižnice, ktoré ponúka IDP AtmelStudio, prípadne Arduino, budete využívať kódy, ktoré už pred vami niekto naprogramoval. Potom sa stačí oboznámiť s dostupnými funkciami knižničných programov a využívať ich vo vlastných aplikáciách. Samozrejme, tento postup predstavuje časovo efektívnejší spôsob vývoja aplikácií, má však isté obmedzenia. Ak chcete tvoriť vlastné funkcie optimalizované pre konkrétne použitie, prípadne pre špecializovaný hardvér, musíte siahnuť až na túto najnižšiu úroveň programovania. </p> <h2 id=uloha>Úloha<a class=headerlink href=#uloha title="Permanent link">&para;</a></h2> <p>Vráťme sa však konečne k nášmu projektu UART. V prvom kroku vytvoríme triedu s názvom UART, ktorá bude obsahovať len tri metódy:</p> <ul> <li>inicializácia <code>UART_init()</code>,</li> <li>vyslanie znaku <code>UART_vysli_znak(char)</code>,</li> <li>príjem znaku <code>UART_citaj_znak(void)</code>.</li> </ul> <blockquote> <p>Štruktúra projektu</p> <div class=highlight><pre><span></span><code>    .
    ├── AKUC.cpp
    ├── AKUC.h
    ├── BOARD_AVR.h
    ├── main.cpp
    ├── RGB_LED.cpp
    ├── RGB_LED.h
    ├── TLACIDLO.cpp
    ├── TLACIDLO.h
    ├── UART_BT.cpp <span class=c1>#nová trieda</span>
    └── UART_BT.h <span class=c1># nový hlavičkový súbor</span>
</code></pre></div> </blockquote> <div class=tabbed-set data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>Hlavičkový súbor UART.h</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=cp>#ifndef __UART_H__</span>
<span class=cp>#define __UART_H__</span>

<span class=cp>#include</span> <span class=cpf>&quot;BOARD_AVR.h&quot;</span><span class=cp></span>

<span class=k>class</span> <span class=nc>UART</span>
<span class=p>{</span>
    <span class=c1>//variables</span>
<span class=k>public</span><span class=o>:</span>
<span class=k>protected</span><span class=o>:</span>
<span class=k>private</span><span class=o>:</span>
    <span class=c1>//functions</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>UART</span><span class=p>();</span>
    <span class=o>~</span><span class=n>UART</span><span class=p>();</span>
    <span class=kt>void</span> <span class=nf>Uart_init</span><span class=p>(</span><span class=kt>void</span><span class=p>);</span>           <span class=c1>// nastavenie parametrov prenosu</span>
    <span class=kt>void</span> <span class=nf>Uart_send_char</span><span class=p>(</span><span class=kt>uint8_t</span> <span class=n>x</span><span class=p>);</span> <span class=c1>//vyslanie znaku</span>
    <span class=kt>uint8_t</span> <span class=nf>Uart_rec_char</span><span class=p>(</span><span class=kt>void</span><span class=p>);</span>    <span class=c1>//prijem znaku</span>

<span class=k>protected</span><span class=o>:</span>
<span class=k>private</span><span class=o>:</span>
<span class=p>};</span>     <span class=c1>//UART</span>
<span class=cp>#endif </span><span class=c1>//__UART_H__</span>
</code></pre></div> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>Definičný súbor UART.cpp</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=cp>#include</span> <span class=cpf>&quot;UART.h&quot;</span><span class=cp></span>

<span class=c1>// default constructor</span>
<span class=n>UART</span><span class=o>::</span><span class=n>UART</span><span class=p>()</span>
<span class=p>{</span>
    <span class=n>PRR</span> <span class=o>&amp;=</span> <span class=o>~</span><span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>PRUSART0</span><span class=p>);</span>
<span class=p>}</span> <span class=c1>//UART</span>

<span class=c1>// default destructor</span>
<span class=n>UART</span><span class=o>::~</span><span class=n>UART</span><span class=p>()</span>
<span class=p>{</span>
    <span class=n>PRR</span> <span class=o>|=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>PRUSART0</span><span class=p>);</span>
<span class=p>}</span>

<span class=kt>void</span> <span class=n>UART</span><span class=o>::</span><span class=n>Uart_init</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span>
<span class=p>{</span>
    <span class=n>DDRD</span> <span class=o>|=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>TXD</span><span class=p>);</span>                  <span class=c1>// Tx output</span>
    <span class=n>DDRD</span> <span class=o>&amp;=</span> <span class=o>~</span><span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>RXD</span><span class=p>);</span>                 <span class=c1>//Rx input</span>
    <span class=n>UBRR0H</span> <span class=o>=</span> <span class=p>(</span><span class=kt>uint8_t</span><span class=p>)(</span><span class=n>UBRR_VALUE</span> <span class=o>&gt;&gt;</span> <span class=mi>8</span><span class=p>);</span> <span class=c1>// BAUDERATE  v BOARD_AVR.h</span>
    <span class=n>UBRR0L</span> <span class=o>=</span> <span class=p>(</span><span class=kt>uint8_t</span><span class=p>)</span><span class=n>UBRR_VALUE</span><span class=p>;</span>
    <span class=n>UCSR0C</span> <span class=o>|=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>UCSZ01</span><span class=p>)</span> <span class=o>|</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>UCSZ00</span><span class=p>);</span> <span class=c1>//8 bits, parit non, 1 stop</span>
    <span class=n>UCSR0B</span> <span class=o>|=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>RXEN0</span><span class=p>)</span> <span class=o>|</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>TXEN0</span><span class=p>);</span>   <span class=c1>// enable rx a tx</span>
    <span class=n>UCSR0A</span> <span class=o>|=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>U2X0</span><span class=p>);</span>
<span class=p>};</span>

<span class=kt>void</span> <span class=n>UART</span><span class=o>::</span><span class=n>Uart_send_char</span><span class=p>(</span><span class=kt>uint8_t</span> <span class=n>x</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=p>(</span><span class=n>UCSR0A</span> <span class=o>&amp;</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>UDRE0</span><span class=p>)))</span>
    <span class=p>{</span>
    <span class=p>};</span> <span class=c1>// caka na uvolnenie UDR</span>
    <span class=n>UDR0</span> <span class=o>=</span> <span class=n>x</span><span class=p>;</span>
<span class=p>};</span>

<span class=kt>uint8_t</span> <span class=n>UART</span><span class=o>::</span><span class=n>Uart_rec_char</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=p>(</span><span class=n>UCSR0A</span> <span class=o>&amp;</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>RXC0</span><span class=p>)))</span>
    <span class=p>{</span>
    <span class=p>};</span> <span class=c1>// caka na prijem znaku</span>
    <span class=k>return</span> <span class=n>UDR0</span><span class=p>;</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <p><strong>Pre overenie funkcií triedy UART uvádzame aj jednoduchý kód funkcie <code>main()</code>:</strong></p> <div class=tabbed-set data-tabs=2:1><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><label for=__tabbed_2_1>main.cpp</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=n>RGB_LED</span> <span class=n>led</span><span class=p>;</span> <span class=c1>// vytvorenie instancie led triedy RGB_LED</span>
<span class=n>AKUC</span> <span class=n>aku</span><span class=p>;</span>
<span class=n>TLACIDLO</span> <span class=n>tl</span><span class=p>;</span>          <span class=c1>// tl je meno objektu</span>
<span class=n>TLACIDLO</span> <span class=o>*</span><span class=n>p_tl</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>tl</span><span class=p>;</span> <span class=c1>//p_tl je pointer na objekt tl</span>
<span class=n>UART</span> <span class=n>uart</span><span class=p>;</span>

<span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
    <span class=n>uart</span><span class=p>.</span><span class=n>Uart_init</span><span class=p>();</span>
    <span class=kt>char</span> <span class=n>pocet</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

    <span class=k>for</span> <span class=p>(</span><span class=kt>uint8_t</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>20</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>){</span>
        <span class=n>uart</span><span class=p>.</span><span class=n>Uart_send_char</span><span class=p>(</span><span class=sc>&#39;-&#39;</span><span class=p>);</span>
    <span class=p>}</span>
    <span class=n>uart</span><span class=p>.</span><span class=n>Uart_send_char</span><span class=p>(</span><span class=sc>&#39;\n&#39;</span><span class=p>);</span>
    <span class=n>uart</span><span class=p>.</span><span class=n>Uart_send_char</span><span class=p>(</span><span class=sc>&#39;\r&#39;</span><span class=p>);</span>

    <span class=k>while</span> <span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=c1>//nekonecny cyklus</span>
    <span class=p>{</span>
        <span class=c1>//while(!p_tl-&gt;get_Tlac()){};   // pokial nie je stlacene caka</span>
        <span class=kt>char</span> <span class=n>znak</span> <span class=o>=</span> <span class=n>uart</span><span class=p>.</span><span class=n>Uart_rec_char</span><span class=p>();</span> <span class=c1>//caka na prijem znaku</span>
        <span class=c1>//uart.Uart_send_char(pocet+0x30);</span>
        <span class=n>uart</span><span class=p>.</span><span class=n>Uart_send_char</span><span class=p>(</span><span class=n>znak</span><span class=p>);</span>
        <span class=n>pocet</span><span class=o>++</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> </div> </div> <p>Všimnime si funkciu <code>UART_init()</code>. Táto nastavuje všetky parametre sériového prenosu. Nebolo by vhodnejšie aby pri volaní funkcie užívateľ zadal konkrétne parametre prenosu podľa aktuálnej potreby? Samozrejme, že áno. Preto sa pokúste upraviť túto funkciu tak, aby sme pri jej volaní mohli zadať aspoň prenosovú rýchlosť.</p> <h2 id=rozsirenie-triedy-uart>Rozšírenie triedy UART<a class=headerlink href=#rozsirenie-triedy-uart title="Permanent link">&para;</a></h2> <p><strong>Projekt AVR1</strong></p> <p>Predchádzajúcu triedu <code>UART</code> mierne modifikujeme, tak aby ju bolo možné využívať na vysielanie reťazcov znakov, znamienkových a neznamienkových čísel <code>int</code> a <code>long int</code>. Trieda je nazvaná <code>UART_BT</code>. V ďalších príkladoch ju budeme častejšie používať na komunikáciu medzi AVR-Board a PC. Upozorňujeme na skutočnosť že metóda <code>Uart_send(x)</code> môže byť volaná s rôznymi typmi argumentu „x“. Na základe typu argumentu sa volá odpovedajúca metóda/funkcia (jedna z piatich). Tomuto javu sa hovorí preťaženie funkcií.</p> <div class=tabbed-set data-tabs=3:2><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><label for=__tabbed_3_1>Hlavičkový súbor UART_BT.h</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=cp>#ifndef __UART_BT_H__</span>
<span class=cp>#define __UART_BT_H__</span>
<span class=cp>#include</span> <span class=cpf>&quot;BOARD_AVR.h&quot;</span><span class=cp></span>

<span class=k>class</span> <span class=nc>UART_BT</span>
<span class=p>{</span>
    <span class=c1>//variables</span>
<span class=k>public</span><span class=o>:</span>
<span class=k>protected</span><span class=o>:</span>
<span class=k>private</span><span class=o>:</span>
    <span class=c1>//functions</span>
<span class=k>public</span><span class=o>:</span>
    <span class=n>UART_BT</span><span class=p>();</span>
    <span class=o>~</span><span class=n>UART_BT</span><span class=p>();</span>
    <span class=kt>void</span> <span class=nf>Uart_int</span><span class=p>(</span><span class=kt>void</span><span class=p>);</span>

    <span class=kt>void</span> <span class=nf>Uart_send_char</span><span class=p>(</span><span class=kt>uint8_t</span> <span class=n>x</span><span class=p>);</span>
    <span class=kt>uint8_t</span> <span class=nf>Uart_rec_char</span><span class=p>(</span><span class=kt>void</span><span class=p>);</span>

    <span class=kt>void</span> <span class=nf>Uart_send_bytes</span><span class=p>(</span><span class=kt>char</span> <span class=o>*</span><span class=n>data</span><span class=p>,</span> <span class=k>const</span> <span class=kt>uint8_t</span> <span class=n>len</span><span class=p>);</span>
    <span class=kt>void</span> <span class=nf>Uart_send</span><span class=p>(</span><span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>data</span><span class=p>);</span>
    <span class=kt>void</span> <span class=nf>Uart_send</span><span class=p>(</span><span class=kt>long</span> <span class=n>num</span><span class=p>);</span>
    <span class=kt>void</span> <span class=nf>Uart_send</span><span class=p>(</span><span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>num</span><span class=p>);</span>
    <span class=kt>void</span> <span class=nf>Uart_send</span><span class=p>(</span><span class=kt>int</span> <span class=n>num</span><span class=p>);</span>
    <span class=kt>void</span> <span class=nf>Uart_send</span><span class=p>(</span><span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>num</span><span class=p>);</span>

<span class=k>protected</span><span class=o>:</span>
<span class=k>private</span><span class=o>:</span>
<span class=p>};</span> <span class=c1>//UART_BT</span>

<span class=cp>#endif </span><span class=c1>//__UART_BT_H__</span>
</code></pre></div> </div> <input id=__tabbed_3_2 name=__tabbed_3 type=radio><label for=__tabbed_3_2>Definičný súbor UART_BT.cpp</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=cp>#include</span> <span class=cpf>&quot;UART_BT.h&quot;</span><span class=cp></span>

<span class=n>UART_BT</span><span class=o>::</span><span class=n>UART_BT</span><span class=p>()</span>
<span class=p>{</span> <span class=c1>// Konstruktor</span>
    <span class=n>PRR</span> <span class=o>&amp;=</span> <span class=o>~</span><span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>PRUSART0</span><span class=p>);</span>
<span class=p>};</span>

<span class=n>UART_BT</span><span class=o>::~</span><span class=n>UART_BT</span><span class=p>()</span>
<span class=p>{</span> <span class=c1>// Destruktor</span>
    <span class=n>PRR</span> <span class=o>|=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>PRUSART0</span><span class=p>);</span>
<span class=p>};</span>

<span class=kt>void</span> <span class=n>UART_BT</span><span class=o>::</span><span class=n>Uart_int</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span>
<span class=p>{</span>
    <span class=n>DDRD</span> <span class=o>|=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>PORTD1</span><span class=p>);</span>               <span class=c1>// Tx output</span>
    <span class=n>DDRD</span> <span class=o>&amp;=</span> <span class=o>~</span><span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>PORTD0</span><span class=p>);</span>              <span class=c1>// Rx input</span>
    <span class=n>UBRR0H</span> <span class=o>=</span> <span class=p>(</span><span class=kt>uint8_t</span><span class=p>)(</span><span class=n>UBRR_VALUE</span> <span class=o>&gt;&gt;</span> <span class=mi>8</span><span class=p>);</span> <span class=c1>// BAUDERATE  v BOARD_AVR.h</span>
    <span class=n>UBRR0L</span> <span class=o>=</span> <span class=p>(</span><span class=kt>uint8_t</span><span class=p>)</span><span class=n>UBRR_VALUE</span><span class=p>;</span>
    <span class=n>UCSR0C</span> <span class=o>|=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>UCSZ01</span><span class=p>)</span> <span class=o>|</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>UCSZ00</span><span class=p>);</span> <span class=c1>//8 bits, parit non, 1 stop</span>
    <span class=n>UCSR0B</span> <span class=o>|=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>RXEN0</span><span class=p>)</span> <span class=o>|</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>TXEN0</span><span class=p>);</span>   <span class=c1>// enable rx a tx</span>
    <span class=n>UCSR0A</span> <span class=o>|=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>U2X0</span><span class=p>);</span>
<span class=p>};</span>

<span class=kt>void</span> <span class=n>UART_BT</span><span class=o>::</span><span class=n>Uart_send_char</span><span class=p>(</span><span class=kt>uint8_t</span> <span class=n>x</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=p>(</span><span class=n>UCSR0A</span> <span class=o>&amp;</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>UDRE0</span><span class=p>)))</span>
    <span class=p>{</span>
    <span class=p>};</span> <span class=c1>// caka na uvolnenie UDR</span>
    <span class=n>UDR0</span> <span class=o>=</span> <span class=n>x</span><span class=p>;</span>
<span class=p>};</span>

<span class=kt>uint8_t</span> <span class=n>UART_BT</span><span class=o>::</span><span class=n>Uart_rec_char</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=p>(</span><span class=n>UCSR0A</span> <span class=o>&amp;</span> <span class=p>(</span><span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=n>RXC0</span><span class=p>)))</span>
    <span class=p>{</span>
    <span class=p>};</span> 
    <span class=k>return</span> <span class=n>UDR0</span><span class=p>;</span>
<span class=p>};</span>

<span class=kt>void</span> <span class=n>UART_BT</span><span class=o>::</span><span class=n>Uart_send_bytes</span><span class=p>(</span><span class=kt>char</span> <span class=o>*</span><span class=n>data</span><span class=p>,</span> <span class=k>const</span> <span class=kt>uint8_t</span> <span class=n>len</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>for</span> <span class=p>(</span><span class=kt>uint8_t</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>len</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
        <span class=k>this</span><span class=o>-&gt;</span><span class=n>Uart_send_char</span><span class=p>(</span><span class=o>*</span><span class=p>(</span><span class=n>data</span><span class=o>++</span><span class=p>));</span>
<span class=p>};</span>

<span class=kt>void</span> <span class=n>UART_BT</span><span class=o>::</span><span class=n>Uart_send</span><span class=p>(</span><span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>data</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>for</span> <span class=p>(</span><span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>s</span> <span class=o>=</span> <span class=n>data</span><span class=p>;</span> <span class=o>*</span><span class=n>s</span><span class=p>;</span> <span class=o>++</span><span class=n>s</span><span class=p>)</span>
    <span class=p>{</span>
        <span class=k>this</span><span class=o>-&gt;</span><span class=n>Uart_send_char</span><span class=p>(</span><span class=o>*</span><span class=n>s</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>};</span>

<span class=kt>void</span> <span class=n>UART_BT</span><span class=o>::</span><span class=n>Uart_send</span><span class=p>(</span><span class=kt>long</span> <span class=n>num</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>num</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>)</span>
    <span class=p>{</span>
        <span class=k>this</span><span class=o>-&gt;</span><span class=n>Uart_send_char</span><span class=p>(</span><span class=sc>&#39;-&#39;</span><span class=p>);</span>
        <span class=n>num</span> <span class=o>=</span> <span class=o>-</span><span class=n>num</span><span class=p>;</span>
    <span class=p>}</span>
    <span class=k>this</span><span class=o>-&gt;</span><span class=n>Uart_send</span><span class=p>((</span><span class=kt>unsigned</span> <span class=kt>long</span><span class=p>)</span><span class=n>num</span><span class=p>);</span>
<span class=p>};</span>

<span class=kt>void</span> <span class=n>UART_BT</span><span class=o>::</span><span class=n>Uart_send</span><span class=p>(</span><span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>num</span><span class=p>)</span>
<span class=p>{</span>
    <span class=c1>// max počet signed/unsigned long je 10</span>
    <span class=kt>char</span> <span class=n>digits</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
    <span class=kt>uint8_t</span> <span class=n>len</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
    <span class=k>do</span>
    <span class=p>{</span>
        <span class=n>digits</span><span class=p>[</span><span class=n>len</span><span class=p>]</span> <span class=o>=</span> <span class=sc>&#39;0&#39;</span> <span class=o>+</span> <span class=p>(</span><span class=n>num</span> <span class=o>%</span> <span class=mi>10</span><span class=p>);</span>
        <span class=n>len</span><span class=o>++</span><span class=p>;</span>
    <span class=p>}</span> <span class=k>while</span> <span class=p>(</span><span class=n>num</span> <span class=o>/=</span> <span class=mi>10</span><span class=p>);</span>
    <span class=k>while</span> <span class=p>(</span><span class=n>len</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span>
    <span class=p>{</span>
        <span class=k>this</span><span class=o>-&gt;</span><span class=n>Uart_send_char</span><span class=p>(</span><span class=n>digits</span><span class=p>[</span><span class=o>--</span><span class=n>len</span><span class=p>]);</span>
    <span class=p>}</span>
<span class=p>};</span>

<span class=kt>void</span> <span class=n>UART_BT</span><span class=o>::</span><span class=n>Uart_send</span><span class=p>(</span><span class=kt>int</span> <span class=n>num</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>this</span><span class=o>-&gt;</span><span class=n>Uart_send</span><span class=p>((</span><span class=kt>long</span><span class=p>)</span><span class=n>num</span><span class=p>);</span>
<span class=p>};</span>

<span class=kt>void</span> <span class=n>UART_BT</span><span class=o>::</span><span class=n>Uart_send</span><span class=p>(</span><span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>num</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>this</span><span class=o>-&gt;</span><span class=n>Uart_send</span><span class=p>((</span><span class=kt>unsigned</span> <span class=kt>long</span><span class=p>)</span><span class=n>num</span><span class=p>);</span>
<span class=p>};</span>
</code></pre></div> </div> </div> <hr> <div class=tabbed-set data-tabs=4:1><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><label for=__tabbed_4_1>main.cpp </label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=cp>#include</span> <span class=cpf>&quot;BOARD_AVR.h&quot;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&quot;UART_BT.h&quot;</span><span class=cp></span>

    <span class=kt>int</span>
    <span class=nf>main</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span>
<span class=p>{</span>

    <span class=n>UART_BT</span> <span class=n>ua</span><span class=p>;</span>         <span class=c1>//objekt pomenovaný ua</span>
    <span class=n>UART_BT</span> <span class=o>*</span><span class=n>p_U</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>ua</span><span class=p>;</span> <span class=c1>//pointer na objekt ua</span>

    <span class=n>ua</span><span class=p>.</span><span class=n>Uart_int</span><span class=p>();</span>      <span class=c1>//inicializácia Vlastnosti: 8N1, rýchlosť 9600</span>

    <span class=n>ua</span><span class=p>.</span><span class=n>Uart_send</span><span class=p>(</span><span class=s>&quot;TOTO je test vysielania AVR_BOARD</span><span class=se>\n\r</span><span class=s>&quot;</span><span class=p>);</span>

    <span class=k>while</span> <span class=p>(</span><span class=mi>1</span><span class=p>)</span>
    <span class=p>{</span>
    <span class=p>};</span>
<span class=p>}</span>
</code></pre></div> </div> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label> <a href=../pr3/ title="Príklad 3 „TLAČIDLO“" class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Späť </span> Príklad 3 „TLAČIDLO“ </div> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 Martin Húdik </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/squidfunk target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../assets/javascripts/vendor.83fe6e3c.min.js></script> <script src=../assets/javascripts/bundle.7e1cb91c.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Kop\u00edrova\u0165 do schr\u00e1nky", "clipboard.copied": "Skop\u00edrovan\u00e9 do schr\u00e1nky", "search.config.lang": "", "search.config.pipeline": "", "search.config.separator": "", "search.result.placeholder": "Pre vyh\u013ead\u00e1vanie za\u010dni p\u00edsa\u0165", "search.result.none": "\u017diadne vyhovuj\u00face dokumenty", "search.result.one": "Vyhovuj\u00faci dokument: 1", "search.result.other": "Vyhovuj\u00face dokumenty: #"}</script> <script>
        app = initialize({
          base: "..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>